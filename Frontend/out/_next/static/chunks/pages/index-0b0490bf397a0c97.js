(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(3468)}])},3468:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var a=s(7876),l=s(4232),r=s(6848),i=s(2120),n=s(1920),o=s(6755),d=s(9099),c=s(9853),x=s(9038);let m={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15,delayChildren:.1}}},h={hidden:{y:30,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100,damping:12}}},u={hidden:{scale:.9,opacity:0},visible:{scale:1,opacity:1,transition:{type:"spring",stiffness:100,damping:15}},hover:{y:-8,scale:1.02,transition:{type:"spring",stiffness:300,damping:20}}},g=e=>{let{expense:t,isEditing:s,editForm:l,onEdit:i,onSave:n,onCancel:o,onDelete:d,onFormChange:c}=e;return(0,a.jsx)(r.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20,scale:.9},whileHover:{y:-4,scale:1.02},className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group",children:(0,a.jsx)("div",{className:"p-6",children:s?(0,a.jsx)(b,{editForm:l,onFormChange:c,onSave:n,onCancel:o}):(0,a.jsx)(p,{expense:t,onEdit:i,onDelete:d})})})},p=e=>{let{expense:t,onEdit:s,onDelete:l}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:(0,a.jsx)(x.gPb,{className:"text-white text-lg"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold text-gray-900",children:["₹",t.amount.toLocaleString("en-IN")]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 flex items-center",children:[(0,a.jsx)(x.bfZ,{className:"mr-1"}),new Date(t.date).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:s,className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:(0,a.jsx)(x.uO9,{})}),(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:l,className:"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:(0,a.jsx)(x.qbC,{})})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[(0,a.jsx)(x.wJQ,{className:"mr-1"}),t.category]}),(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,a.jsx)(x.x1c,{className:"mr-1"}),t.paymentMethod]})]}),t.notes&&(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(x.jie,{className:"text-gray-400 mt-1 text-sm"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:t.notes})]})]})]})},b=e=>{let{editForm:t,onFormChange:s,onSave:l,onCancel:i}=e;return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.gPb,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"number",value:t.amount,onChange:e=>s("amount",e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"0"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.bfZ,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"date",value:t.date,onChange:e=>s("date",e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.wJQ,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{value:t.category,onChange:e=>s("category",e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Food, Transport, etc."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.x1c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{value:t.paymentMethod,onChange:e=>s("paymentMethod",e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Cash, Card, UPI"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.jie,{className:"absolute left-3 top-3 text-gray-400"}),(0,a.jsx)("textarea",{value:t.notes,onChange:e=>s("notes",e.target.value),rows:"3",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all resize-none",placeholder:"Add any additional notes..."})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"flex items-center px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg transition-colors",children:[(0,a.jsx)(x.QCr,{className:"mr-2"}),"Cancel"]}),(0,a.jsxs)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,className:"flex items-center px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg transition-colors",children:[(0,a.jsx)(x.dIn,{className:"mr-2"}),"Save Changes"]})]})]})},j=e=>{let{form:t,onFormChange:s,onSubmit:l,loading:i}=e;return(0,a.jsxs)(r.P.div,{variants:u,whileHover:"hover",className:"bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-500 rounded-2xl shadow-xl overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/10"}),(0,a.jsxs)("div",{className:"relative p-8 text-white",children:[(0,a.jsxs)("div",{className:"flex items-center mb-6",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center mr-4",children:(0,a.jsx)(x.OiG,{className:"text-2xl"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold",children:"Add New Expense"})]}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-white/90",children:"Amount (₹)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.gPb,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/70"}),(0,a.jsx)("input",{type:"number",value:t.amount,onChange:e=>s("amount",e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:bg-white/30 focus:border-white/50 transition-all",placeholder:"Enter amount"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-white/90",children:"Date"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.bfZ,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/70"}),(0,a.jsx)("input",{type:"date",value:t.date,onChange:e=>s("date",e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white focus:bg-white/30 focus:border-white/50 transition-all"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-white/90",children:"Category"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.wJQ,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/70"}),(0,a.jsx)("input",{value:t.category,onChange:e=>s("category",e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:bg-white/30 focus:border-white/50 transition-all",placeholder:"Food, Transport, etc."})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-white/90",children:"Payment Method"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.x1c,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/70"}),(0,a.jsx)("input",{value:t.paymentMethod,onChange:e=>s("paymentMethod",e.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:bg-white/30 focus:border-white/50 transition-all",placeholder:"Cash, Card, UPI"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2 text-white/90",children:"Notes (Optional)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(x.jie,{className:"absolute left-4 top-4 text-white/70"}),(0,a.jsx)("textarea",{value:t.notes,onChange:e=>s("notes",e.target.value),rows:"3",className:"w-full pl-12 pr-4 py-3 bg-white/20 border border-white/30 rounded-xl text-white placeholder-white/70 focus:bg-white/30 focus:border-white/50 transition-all resize-none",placeholder:"Add any additional notes..."})]})]}),(0,a.jsxs)(r.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:l,disabled:i,className:"w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm border border-white/30 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-200 flex items-center justify-center disabled:opacity-50",children:[i?(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}):(0,a.jsx)(x.OiG,{className:"mr-2"}),i?"Adding...":"Add Expense"]})]})]})]})},f=e=>{let{currentPage:t,totalPages:s,onPageChange:l}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-8",children:[(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(Math.max(1,t-1)),disabled:1===t,className:"p-2 rounded-lg bg-white shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:(0,a.jsx)(x._Jj,{})}),[...Array(s)].map((e,s)=>(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(s+1),className:"px-4 py-2 rounded-lg font-medium transition-all ".concat(t===s+1?"bg-indigo-600 text-white shadow-lg":"bg-white text-gray-700 shadow-md hover:shadow-lg"),children:s+1},s)),(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(Math.min(s,t+1)),disabled:t===s,className:"p-2 rounded-lg bg-white shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:(0,a.jsx)(x.X6T,{})})]})},y=e=>{let{isLoggedIn:t,onLoginClick:s}=e;return(0,a.jsxs)(r.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-16",children:[(0,a.jsx)("div",{className:"text-8xl mb-6",children:"\uD83D\uDCB8"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-700 mb-2",children:t?"No Expenses Yet":"Welcome to Expense Tracker"}),(0,a.jsx)("p",{className:"text-gray-500 mb-6",children:t?"Start tracking your expenses by adding your first entry!":"Please login to view and manage your expenses"}),(0,a.jsx)("div",{className:"flex items-center justify-center text-indigo-600",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Ny1,{className:"mr-2"}),(0,a.jsx)("span",{children:"Add an expense to see it here"})]}):(0,a.jsx)(r.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3 rounded-xl font-semibold transition-colors flex items-center",children:"\uD83D\uDD10 Login to Get Started"})})]})};function v(){let e=(0,d.useRouter)(),{user:t}=(0,c.J)(),[s,u]=(0,l.useState)({amount:"",category:"",date:"",paymentMethod:"",notes:""}),[p,b]=(0,l.useState)([]),[v,w]=(0,l.useState)(null),[N,C]=(0,l.useState)({}),[k,P]=(0,l.useState)(!1),[D,S]=(0,l.useState)(!1),[T,E]=(0,l.useState)(!1),[M,_]=(0,l.useState)(1),A=async()=>{try{S(!0);let e=await o.A.get("/expenses");b(e.data)}catch(e){console.error(e),b([])}finally{S(!1)}};(0,l.useEffect)(()=>{localStorage.getItem("token")?(E(!0),A()):(E(!1),b([]),S(!1))},[]);let F=async()=>{if(!T){confirm("Please login to add expenses. Do you want to login now?")&&e.push("/login");return}if(!s.amount||!s.category||!s.date||!s.paymentMethod)return void alert("Please fill in all required fields");try{P(!0),await o.A.post("/expenses",{...s,amount:Number(s.amount)}),u({amount:"",category:"",date:"",paymentMethod:"",notes:""}),A()}catch(e){console.error(e),alert("Failed to add expense")}finally{P(!1)}},H=(e,t)=>{C(s=>({...s,[e]:t}))},I=async()=>{try{await o.A.put("/expenses/".concat(v),{...N,amount:Number(N.amount)}),w(null),C({}),A()}catch(e){console.error(e),alert("Failed to update expense")}},L=()=>{w(null),C({})},O=async e=>{if(!T)return void alert("Please login to delete expenses");if(confirm("Are you sure you want to delete this expense?"))try{await o.A.delete("/expenses/".concat(e)),A()}catch(e){console.error(e),alert("Failed to delete expense")}},J=6*M,Q=J-6,G=p.slice(Q,J),X=Math.ceil(p.length/6);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:(0,a.jsxs)(r.P.main,{variants:m,initial:"hidden",animate:"visible",className:"max-w-7xl mx-auto px-6 py-8",children:[(0,a.jsxs)(r.P.div,{variants:h,className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-5xl font-bold text-gray-900 mb-4",children:"Expense Tracker"}),(0,a.jsx)("p",{className:"text-xl text-gray-600",children:"Take control of your finances with ease"}),!T&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-blue-800 text-center",children:["\uD83D\uDD12 Please",(0,a.jsx)("button",{onClick:()=>e.push("/login"),className:"text-blue-900 underline hover:text-blue-700 mx-1 font-semibold",children:"login"}),"to start tracking your expenses and unlock all features."]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[(0,a.jsx)(r.P.div,{variants:h,children:(0,a.jsx)(j,{form:s,onFormChange:(e,t)=>{u(s=>({...s,[e]:t}))},onSubmit:F,loading:k})}),(0,a.jsxs)(r.P.div,{variants:h,className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,a.jsx)(x.Ny1,{className:"mr-3 text-indigo-600"}),"Quick Overview"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium",children:"Total Expenses"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-green-600",children:p.length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium",children:"This Month"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:["₹",p.filter(e=>new Date(e.date).getMonth()===new Date().getMonth()).reduce((e,t)=>e+t.amount,0).toLocaleString("en-IN")]})]})]})]})]}),(0,a.jsxs)(r.P.div,{variants:h,children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:T?"Your Expenses (".concat(p.length,")"):"Your Expenses"}),p.length>6&&(0,a.jsxs)("p",{className:"text-gray-600",children:["Showing ",Q+1,"-",Math.min(J,p.length)," of ",p.length]})]}),D?(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading expenses..."})]}):0===p.length?(0,a.jsx)(y,{isLoggedIn:T,onLoginClick:()=>e.push("/login")}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:(0,a.jsx)(i.N,{mode:"popLayout",children:G.map(e=>(0,a.jsx)(g,{expense:e,isEditing:v===e._id,editForm:N,onEdit:()=>(e=>{if(!T)return void alert("Please login to edit expenses");w(e._id),C({...e,amount:e.amount.toString(),date:e.date.slice(0,10)})})(e),onSave:I,onCancel:L,onDelete:()=>O(e._id),onFormChange:H},e._id))})}),X>1&&(0,a.jsx)(f,{currentPage:M,totalPages:X,onPageChange:_})]})]})]})})]})}}},e=>{e.O(0,[938,693,230,299,636,593,792],()=>e(e.s=2936)),_N_E=e.O()}]);